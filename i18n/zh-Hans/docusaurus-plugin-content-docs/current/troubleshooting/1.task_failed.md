---
sidebar_position: 1
---

# 任务失败

## 自动任务重试系统

TikMatrix 现在包含了智能的自动重试系统。当任务在执行过程中失败时：

- 系统会自动重新调度任务，在下次重试前等待 **5-60秒的随机延迟**
- 每次重试尝试都会被跟踪并在任务管理界面中显示
- 这有助于确保临时问题（如网络故障或应用延迟）不会永久导致任务失败
- 无需手动干预 - 系统会透明地处理重试
- 重试次数会显示在任务列表的重试次数列中，方便您监控每个任务的尝试情况

## 任务执行失败排查步骤

### 第1步：检查Agent状态

1. 点击打开Agent应用
2. 确认手机是否已打开TikMatrix app
3. 观察是否在10秒内显示成功状态
4. 如果Agent状态为失败，请按照[初始化设备](../tutorial-basics/2.init-device.md)文档步骤进行排查

### 第2步：检查TikTok应用状态

1. 检查TikTok是否安装了正确的版本
2. 点击"打开TikTok"按钮，观察手机是否正确打开TikTok应用
3. 点击"关闭TikTok"按钮，观察手机是否正确关闭TikTok应用
4. 确认这些操作是否能正常执行
5. 如果没有成功打开或者关闭TikTok，请按照[安装TikTok](../tutorial-basics/3.install-tiktok.md)文档步骤进行排查

### 第3步：检查TikTok语言设置

TikMatrix目前只支持英文的TikTok。如果您的TikTok应用不是英文，请按照以下步骤进行设置：

1. 打开手机上的TikTok应用
2. 进入个人资料
3. 点击右上角的三个点打开设置
4. 滚动到“语言”部分
5. 选择“英语”作为语言

### 第4步：查看任务日志

如果前两步检查都没有发现问题，需要查看详细日志并联系技术支持：

1. 点击手机屏幕
2. 在手机右侧的操作面板最下方找到并点击"日志"按钮
3. 查看任务执行的详细日志信息
4. 复制最下方约10行的日志内容
5. 将复制的日志内容发送给技术支持人员进行进一步分析

## 已知问题

### 首次连接新手机

有时在首次连接新手机时会出现任务失败的情况。这是一个常见问题，可以通过以下步骤解决：

1. 完全关闭TikMatrix软件
2. 重启TikMatrix应用程序
3. 再次运行您的任务

此问题通常发生在初始设备设置过程中，通常在重启软件后得到解决。

### 端口冲突错误

如果在日志中出现以下错误信息：

```text
error: CustomError("192.168.31.115:5555 :waitForExists timeout -> text('Profile') -> Failed to jsonrpc: http://127.0.0.1:50428/jsonrpc/0 method: waitForExists error: error sending request for url (http://127.0.0.1:50428/jsonrpc/0): error trying to connect: tcp connect error: The connection could not be established because the target computer refused the connection request. (os error 10061)")
```

这表示存在端口冲突问题。要解决此问题：

1. **完全重启TikMatrix软件**后重试
2. **避免在使用TikMatrix时同时使用其他控制软件**，因为它们可能导致端口冲突
3. 确保没有其他应用程序使用相同的通信端口

此错误通常发生在多个设备控制应用程序同时运行时，导致通信端口冲突。

## 如果问题仍然存在

请通过[Telegram](https://t.me/tikmatrix_chat)联系我们的技术支持团队，提供以下信息：

- 任务配置截图
- 任务失败截图或任务执行视频
- 步骤3的日志内容
- 你已经尝试过的步骤
