---
sidebar_position: 2
title: API управления задачами
description: Полная документация по endpoint'ам управления задачами
---

На этой странице описаны все доступные API endpoint'ы для управления задачами в TikMatrix.

## Создание задачи

Создайте новую задачу для одного или нескольких устройств.

- **Endpoint:** `POST /api/v1/task`
- **Content-Type:** `application/json`

| Параметр | Тип | Обязательно | Описание |
|---------|-----|-----------|---------|
| serials | string[] | Да | Массив серийных номеров устройств |
| script_name | string | Да | Название скрипта для выполнения |
| script_config | object | Нет | Параметры конфигурации скрипта |
| enable_multi_account | boolean | Нет | Включить режим мультиаккаунта (по умолчанию: false) |
| min_interval | integer | Нет | Минимальный интервал в секундах (по умолчанию: 1) |
| max_interval | integer | Нет | Максимальный интервал в секундах (по умолчанию: 5) |

## Список задач

Запрос задач с опциональными фильтрами.

- **Endpoint:** `GET /api/v1/task`

| Параметр | Тип | Обязательно | Описание |
|---------|-----|-----------|---------|
| status | integer | Нет | Фильтр по статусу (0=pending, 1=running, 2=completed, 3=failed) |
| serial | string | Нет | Фильтр по серийному номеру устройства |
| script_name | string | Нет | Фильтр по имени скрипта |
| source | string | Нет | Фильтр по источнику ("ui" или "api") |
| page | integer | Нет | Номер страницы (по умолчанию: 1) |
| page_size | integer | Нет | Количество элементов на странице (по умолчанию: 20, макс: 100) |

## Детали задачи

Получить подробную информацию о конкретной задаче.

- **Endpoint:** `GET /api/v1/task/{task_id}`

## Удалить задачу

Удаляет задачу. Если задача выполняется, сначала будет произведена попытка её остановить.

- **Endpoint:** `DELETE /api/v1/task/{task_id}`

## Массовое удаление задач

Удаляет несколько задач одновременно. Выполняющиеся задачи будут остановлены перед удалением.

- **Endpoint:** `DELETE /api/v1/task/batch`
- **Тело запроса:** `{ "task_ids": [1, 2, 3] }`

## Остановить задачу

Останавливает выполняющуюся задачу.

- **Endpoint:** `POST /api/v1/task/{task_id}/stop`

## Повтор попытки для неудачных задач

Повторно запустить одну неудачную задачу.

- **Endpoint:** `POST /api/v1/task/{task_id}/retry`

## Повторить все неудачные задачи

Запустить повторно все задачи, находящиеся в состоянии failed.

- **Endpoint:** `POST /api/v1/task/retry-all`

## Статистика задач

Получить статистику по всем задачам.

- **Endpoint:** `GET /api/v1/task/stats`
- **Ответ:** Возвращает количество total, pending, running, completed и failed.

## Проверка лицензии для API

Проверить, поддерживает ли лицензия доступ к API.

- **Endpoint:** `GET /api/v1/license/check`
- **Примечание:** План Starter вернёт код ошибки 40301. Доступ предоставлен для Pro, Team и Business.
