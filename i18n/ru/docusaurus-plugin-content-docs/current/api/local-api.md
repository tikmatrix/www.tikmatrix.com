---
sidebar_position: 1
title: Обзор локального API
description: Локальное API TikMatrix для программного управления задачами
---

TikMatrix предоставляет локальное RESTful API, которое позволяет управлять задачами программно. Это полезно для интеграции TikMatrix с вашими автоматизированными системами, создания пользовательских рабочих процессов или выполнения пакетных операций.

## Требования

:::warning Требование лицензии
**Локальное API доступно только для подписчиков планов Pro, Team и Business.** Для плана Starter доступ к API отсутствует.
:::

## Базовый URL

API работает локально по адресу:

```text
http://localhost:50809/api/v1/
```

:::note
Порт `50809` — порт по умолчанию. Убедитесь, что TikMatrix запущен перед отправкой запросов.
:::

## Формат ответа

Все ответы API имеют формат:

```json
{
  "code": 0,
  "message": "success",
  "data": { ... }
}
```

### Коды ответов

| Code | Описание |
|------|----------|
| 0 | Успех |
| 40001 | Неверный запрос - неверные параметры |
| 40301 | Запрещено - доступ к API требует план Pro+ |
| 40401 | Не найдено - ресурс отсутствует |
| 50001 | Внутренняя ошибка сервера |

## Быстрый старт

### 1. Проверка доступа к API

Сначала проверьте, поддерживает ли ваша лицензия доступ к API:

```bash
curl http://localhost:50809/api/v1/license/check
```

Пример ответа:

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "plan_name": "Pro",
    "api_enabled": true,
    "device_limit": 20,
    "message": "API access enabled"
  }
}
```

### 2. Создание задачи

```bash
curl -X POST http://localhost:50809/api/v1/task \
  -H "Content-Type: application/json" \
  -d '{
    "serials": ["device_serial_1", "device_serial_2"],
    "script_name": "follow",
    "script_config": {
      "target_username": "@example_user"
    },
    "enable_multi_account": false,
    "min_interval": 1,
    "max_interval": 5
  }'
```

### 3. Получение списка задач

```bash
curl http://localhost:50809/api/v1/task?status=0&page=1&page_size=20
```

## Доступные скрипты

Параметр `script_name` может принимать следующие значения:

| Скрипт | Описание |
|-------|----------|
| `follow` | Подписаться на пользователя |
| `unfollow` | Отписаться |
| `like` | Поставить лайк |
| `comment` | Оставить комментарий |
| `message` | Отправить сообщение |
| `post` | Опубликовать контент |
| `account_warmup` | Разогрев аккаунта |
| `super_marketing` | Супер маркетинговая кампания |
| `profile` | Обновить профиль |
| `scrape_user` | Собирать данные о пользователе |

## Статус задачи

| Код статуса | Статус | Описание |
|------------|--------|----------|
| 0 | pending | Задача ожидает выполнения |
| 1 | running | Задача выполняется |
| 2 | completed | Задача выполнена успешно |
| 3 | failed | Задача завершилась с ошибкой |

## Дальше

- [API управления задачами](./task-management) - создание, запрос и управление задачами
- [Примеры API](./examples) - примеры кода на нескольких языках
