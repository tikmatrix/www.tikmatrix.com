---
sidebar_position: 5
title: Конфигурация скрипта отписки
description: Полный справочник по конфигурации скрипта отписки
---

На этой странице описаны параметры конфигурации скрипта `unfollow`, используемого при создании задач.

## Обзор

Скрипт `unfollow` используется для автоматической отписки от пользователей в TikTok или Instagram. При указании нескольких целевых пользователей через API **система создаёт по одной задаче для каждого пользователя**. Вы можете контролировать время выполнения задач с помощью параметра `start_time`.

## Конфигурация скрипта (`script_config`)

Объект `script_config` содержит параметры скрипта отписки. Ниже приведены доступные параметры:

### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|----------|-----|--------------|--------------|----------|
| target_users | string[] | Да* | [] | Массив целевых имён пользователей (одна задача на пользователя) |
| target_user | string | Да* | "" | Одно имя пользователя или несколько имён, разделённых переносами строк/запятыми |
| access_method | string | Нет | "direct" | Способ перехода к профилю: `direct` (по URL) или `search` |

:::note
Необходимо указать либо массив `target_users`, либо строку `target_user`. Если указаны оба, приоритет имеет `target_users`.
:::

:::info Создание задач
При указании нескольких целевых пользователей API **создаёт по одной задаче для каждого**. Например, при указании 3 целевых пользователей и 2 устройств будет создано 6 задач. Используйте параметр `start_time` для контроля времени выполнения задач.
:::

## Примеры

### Отписка от одного пользователя

```bash
curl -X POST http://localhost:50809/api/v1/task \
  -H "Content-Type: application/json" \
  -d '{
    "serials": ["device_serial_1"],
    "script_name": "unfollow",
    "script_config": {
      "target_users": ["@username_to_unfollow"],
      "access_method": "direct"
    }
  }'
```

### Отписка от нескольких пользователей

При отписке от нескольких пользователей для каждого создаётся отдельная задача:

```bash
curl -X POST http://localhost:50809/api/v1/task \
  -H "Content-Type: application/json" \
  -d '{
    "serials": ["device_serial_1"],
    "script_name": "unfollow",
    "script_config": {
      "target_users": ["@user1", "@user2", "@user3"],
      "access_method": "direct"
    }
  }'
```

Это создаст 3 отдельные задачи, которые выполнятся немедленно.

### Планирование задач по времени

Используйте `start_time` для планирования времени начала задач:

```bash
curl -X POST http://localhost:50809/api/v1/task \
  -H "Content-Type: application/json" \
  -d '{
    "serials": ["device_serial_1"],
    "script_name": "unfollow",
    "script_config": {
      "target_users": ["@user1", "@user2"],
      "access_method": "direct"
    },
    "start_time": "14:30"
  }'
```

### Отписка через поиск

Используйте метод поиска, когда прямой доступ по URL не работает:

```bash
curl -X POST http://localhost:50809/api/v1/task \
  -H "Content-Type: application/json" \
  -d '{
    "serials": ["device_serial_1"],
    "script_name": "unfollow",
    "script_config": {
      "target_users": ["username1", "username2"],
      "access_method": "search"
    }
  }'
```

### Пакетная отписка на нескольких устройствах

```bash
curl -X POST http://localhost:50809/api/v1/task \
  -H "Content-Type: application/json" \
  -d '{
    "serials": ["device_1", "device_2", "device_3"],
    "script_name": "unfollow",
    "script_config": {
      "target_users": ["@old_account"],
      "access_method": "direct"
    },
    "enable_multi_account": true
  }'
```

## Ответ

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "task_ids": [201, 202, 203],
    "created_count": 3
  }
}
```

## Методы доступа

### Прямой метод (`direct`)

- Открывает профиль по URL: `tiktok.com/@username` или `instagram.com/username`
- Быстрее и надёжнее
- Рекомендуется для большинства случаев

### Метод поиска (`search`)

- Переходит в поиск, вводит имя пользователя, нажимает на результат
- Медленнее, но работает при блокировке прямого доступа
- Может быть менее точным при наличии похожих имён

## Лучшие практики

1. **Используйте start_time для планирования**: Используйте параметр `start_time` для планирования времени выполнения задач (формат: "HH:MM").

2. **Предпочитайте прямой доступ**: Метод `direct` быстрее и надёжнее, чем `search`.

3. **Разумная пакетная обработка**: Не отписывайтесь от слишком многих пользователей за раз. Система создаёт по одной задаче на каждого пользователя, поэтому большие списки создают много задач.

## См. также

- [API управления задачами](./task-management.md) - Создание, запрос и управление задачами
- [Конфигурация скрипта публикации](./post-script.md) - Настройка параметров скрипта публикации
- [Конфигурация скрипта подписки](./follow-script.md) - Настройка параметров скрипта подписки
